## ðŸŸ¢ DHCP Server 


![[Pasted image 20251102121514.png]]
This setup essentially turns your FortiGate into the automated traffic cop for your local network.

First, the **DHCP Status is Enabled**, which means the service is active and listening. It then hands out IP addresses only from its defined **Address Range** (like 10.0.0.2 up to 10.0.0.254), reserving the first address for itself.

Finally, the firewall tells every connected device two essential things about the network: the **Netmask** (e.g., 255.255.255.0) which defines the size of the local network, and the **Default Gateway** (set as the Interface IP), which is the crucial address devices must use to get out to the internet.

![[Pasted image 20251102121653.png]]




## ðŸ”’ User Authentication Enforcement


![[Pasted image 20251102122504.png]]

The crucial element of this policy is the **User/group** field:

- **User/group:** Set to **User1**.
    
- **Significance:** This policy will **only allow traffic** to pass if it originates from the `Local_Subnet` **AND** the user associated with that session has successfully authenticated as **User1**.
    

This setup implements **Identity-Based Policy Enforcement**. If a device from the `Local_Subnet` attempts to reach the internet, the FortiGate will present an authentication challenge (like a captive portal). The user must log in as `User1` before the firewall permits the traffic to pass.

### ðŸ‘¤ User Definition to Policy Enforcement

1. **User Definition Complete:** The accounts **User1** and **guest** have been successfully created as **Local** users and their status is **Enabled**. These identities are now ready to be referenced by the firewall.
    
2. **Policy Enforcement:** The next step is to add one of these defined identities (e.g., **User1**) to a **Firewall Policy** (like `To_Internet`). This ensures that only sessions authenticated by that specific user are allowed to traverse the firewall.

![[Pasted image 20251102122547.png]]



###### -ðŸ”’ Authentication Portal
![[Pasted image 20251102130756.png]]
The **Firewall Authentication Portal** (Captive Portal) is dynamically generated by the FortiGate firewall to enforce security policy.

The portal is triggered when a client's traffic matches a Firewall Policy that requires **user authentication** (i.e., the `User/group` field is defined). The firewall immediately **blocks** the initial connection attempt and redirects the user's browser to the authentication page


## ðŸ”’ Captive Portal Configuration

A captive portal is used to enforce authentication before web resources can be accessed. Until a user authenticates successfully, any HTTP request returns the authentication page. After successfully authenticating, a user can access the requested URL and other web resources, as permitted by policies. The captive portal can also be configured to only allow access to members of specific user groups.

### Step 1: User Group Definition (CP-Group)


![[Pasted image 20251102143023.png]]

A **User Group** is an **object** created on the FortiGate that bundles multiple individual user accounts (**Members** like **User1**) together under a single, simplified name (**CP-Group**). The **Type** is set to **Firewall**.

![[Pasted image 20251102143359.png]]
### Step 2: Interface Enforcement Configuration

This configuration segment sets theÂ **Security mode**Â on the network interface (likely the LAN) toÂ **Captive Portal**. This action forces all users connected to this interface to authenticate before the firewall grants them full network access.

- TheÂ **Authentication portal**Â is set toÂ **Local**, meaning the FortiGate hosts and manages the login page itself.
    
- **User access**Â isÂ **Restricted to Groups**, and the policy is enforced against theÂ **CP-Group**Â defined in Step 1.
    
- Any user on this interface must be a member of theÂ **CP-Group**Â and successfully authenticate via the portal to proceed. Once authenticated, theÂ **Redirect after Captive Portal**Â setting sends them back to theirÂ **Original Request**.